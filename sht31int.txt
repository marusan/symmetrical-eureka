#!/usr/bin/env python
import smbus
import time
i2c = smbus.SMBus(1)
addr=0x44

def sign16(x):
    return ( -(x & 0b1000000000000000) |
                  (x & 0b0111111111111111) )

#main
i2c.write_byte_data(addr,0x23,0x34)
time.sleep(0.5)
while 1:
    i2c.write_byte_data(addr,0xe0,0x0)
    data = i2c.read_i2c_block_data(addr,0x0,6)
    rawT = ((data[0]) << 8) | (data[1]) 
    rawR = ((data[3]) << 8) | (data[4])
    # print (hex(data[0]));print(hex(data[1]));print(hex(rawT));print(bin(rawT))
    raw_sT = sign16(int(hex(rawT),16))
    temp = -45 + raw_sT * 175 / 65535
    print (str(temp) +"C")
    # print (hex(data[3]));print(hex(data[4]));print(hex(rawR));print(bin(rawR))
    RH = 100 * rawR / 65535
    print (str(RH) +"%")
    time.sleep(1)
    print ("---")